/// <reference types="node" />
import SCLang from "@supercollider/lang";
import Server from "@supercollider/server";
import { Command, Dryad } from "dryadic";
/**
 * `synthDef` is returned from compilation by sclang and
 * is set in the context for children Dryads to access.
 */
export interface CompiledSynthDef {
    name: string;
    bytes: Buffer;
    synthDesc: SynthDesc;
}
export interface LoadedSynthDef {
    name: string;
}
export declare type SynthDef = CompiledSynthDef | LoadedSynthDef;
export declare type SynthDesc = object;
interface Properties {
    source?: string;
    compileFrom?: string;
    watch: boolean;
    saveToDir?: string;
    loadFrom?: string;
}
interface Context {
    sclang?: SCLang;
    synthDef?: CompiledSynthDef;
    scserver?: Server;
    _watcher?: any;
}
/**
 * Compile a SynthDef from sclang source code
 * or load a precompiled .scsyndef
 *
 * If compilation is required then it will insert SCLang as a parent if necessary.
 *
 * Note that the synthDefName is not known until after the source code is compiled.
 */
export default class SCSynthDef extends Dryad<Properties> {
    static fromSource(source: string): SCSynthDef;
    static fromFile(path: string): SCSynthDef;
    defaultProperties(): Properties;
    /**
     * If there is no SCLang in the parent context,
     * then this will wrap itself in an SCLang (language interpreter).
     */
    requireParent(): string | void;
    prepareForAdd(): Command;
    private _prepareForAdd;
    private _sendSynthDef;
    private _writeSynthDef;
    /**
     * Returns a Promise for a SynthDef result object: name, bytes, synthDesc
     */
    compileSource(context: Context, sourceCode: string, pathName?: string): Promise<CompiledSynthDef>;
    /**
     * Returns a Promise for a SynthDef result object: name, bytes, synthDesc
     */
    private compileFrom;
    add(): Command;
    remove(): Command;
    private putSynthDef;
    /**
     * Return the value of this object, which is the synthDef: {name, bytes, synthDesc}
     * for use in /s_new.
     */
    value(context: Context): SynthDef;
}
export {};
//# sourceMappingURL=SCSynthDef.d.ts.map